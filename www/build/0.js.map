{"version":3,"sources":["../../src/pages/vacina-modal/vacina-modal.module.ts","../../src/pages/vacina-modal/vacina-modal.ts","../../src/pages/vacina-modal/vacina.services.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { VacinaModalPage } from './vacina-modal';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    VacinaModalPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(VacinaModalPage),\r\n  ],\r\n})\r\nexport class VacinaModalPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/vacina-modal/vacina-modal.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ToastController, App } from 'ionic-angular';\r\nimport { ViewController } from 'ionic-angular';\r\nimport { HttpClient,HttpHeaders } from '@angular/common/http';\r\nimport {Validators, FormBuilder, FormGroup } from '@angular/forms';\r\nimport { VacinaService, Vacina } from './vacina.services';\r\nimport { profileService, User } from '../modal/profile.services';\r\nimport { Tab2Page } from '../tab2/tab2';\r\n\r\n/**\r\n * Generated class for the VacinaModalPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-vacina-modal',\r\n  templateUrl: 'vacina-modal.html',\r\n  providers: [VacinaService]\r\n\r\n})\r\nexport class VacinaModalPage {\r\n  private API_URL = 'https://vacimaps-app.herokuapp.com'\r\n  vacina: string;\r\n  data: string;\r\n  lote: string;\r\n  id;\r\n  datajson;\r\n\r\n  private formulario: FormGroup;\r\n  token;\r\n\r\n  vacinas: any;\r\n  nome_vac: any[];\r\n\r\n  hiddenCidades: Boolean;\r\n\r\n  constructor(public navCtrl: NavController,    \r\n    public viewCtrl : ViewController,\r\n    private toast: ToastController, \r\n    private http: HttpClient,\r\n    public appCtrl: App, \r\n    private formBuilder: FormBuilder,\r\n    private VacinaService: VacinaService,\r\n    public navParams: NavParams) {\r\n      this.formulario = this.formBuilder.group({\r\n        validarVacina: ['', Validators.required],\r\n        validarData: ['', Validators.required],\r\n        vaidarLote: ['', Validators.required],\r\n      });\r\n      this.token = JSON.parse(localStorage.getItem('token'));\r\n\r\n      if (this.navParams.data.nome_vacina  && \r\n        this.navParams.data.data_vacina && \r\n        this.navParams.data.ds_local_vacina  &&\r\n        this.navParams.data.id_usuario_vacina\r\n        ) {\r\n        this.nome_vac = this.navParams.data.nome_vacina;\r\n        this.data = new Date(this.navParams.data.data_vacina).toISOString();\r\n        this.lote = this.navParams.data.ds_local_vacina;\r\n        this.id = this.navParams.data.id_usuario_vacina; \r\n        this.vacina = this.navParams.data.id_vacina;;\r\n      }   \r\n        \r\n      this.VacinaService.getVacinas().subscribe((vacinas) => {\r\n        this.vacinas = vacinas;\r\n        this.nome_vac = this.vacinas;\r\n      });\r\n      \r\n     this.hiddenCidades = true;\r\n\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad VacinaModalPage');\r\n  }\r\n\r\n  \r\n  public closeModal(){\r\n    this.viewCtrl.dismiss();\r\n  }  \r\n\r\n  initializeItems() {\r\n    this.vacinas = this.nome_vac;\r\n}\r\n\r\n  doPOST() {\r\n    if(this.id){\r\n\r\n      this.datajson ={ \r\n        id_vacina: this.vacina, \r\n        data_vacina: this.data, \r\n        ds_local_vacina: this.lote,\r\n      }\r\n      console.log(this.datajson);\r\n      let url = `${this.API_URL}/usuario/vacina/${this.id}`;\r\n      this.http\r\n      .put(url, this.datajson, {headers: new HttpHeaders({'token': this.token.token})})\r\n      .subscribe(res => {\r\n        if(res['Mensagem'] == 'Vacina alterada com sucesso!'){          \r\n          this.toast.create({ message: res[\"Mensagem\"], duration: 3000, position: 'botton' }).present()    \r\n          this.closeModal()\r\n        }else {\r\n          this.toast.create({ message: res[\"Mensagem\"], duration: 3000, position: 'botton' }).present()     \r\n          \r\n\r\n\r\n        }\r\n      })   \r\n    }else{\r\n\r\n    console.log(\"POST\");\r\n    let url = `${this.API_URL}/usuario/vacina`;\r\n    this.datajson ={ \r\n      id_vacina: this.vacina, \r\n      data_vacina: this.data, \r\n      lote: this.lote,\r\n    }\r\n    console.log(this.datajson);\r\n    this.http\r\n      .post(url, this.datajson, {headers: new HttpHeaders({'token': this.token.token})})\r\n      .subscribe(res => {\r\n        if(res['Mensagem'] == 'Erro ao cadastrar vacina!'){          \r\n          this.toast.create({ message: res[\"Mensagem\"], duration: 3000, position: 'botton' }).present()    \r\n       \r\n        }else {\r\n          this.toast.create({ message: res[\"Mensagem\"], duration: 3000, position: 'botton' }).present()     \r\n          this.closeModal()\r\n\r\n\r\n        }\r\n      })   \r\n    }      \r\n  }\r\n  getVacinas(ev: any) {\r\n    // Reset items back to all of the items\r\n    this.initializeItems();\r\n    let val\r\n    // set val to the value of the searchbar\r\n    try{\r\n      val = ev.target.value;\r\n               \r\n      if(val.length > 2){\r\n        this.hiddenCidades = false;\r\n      }else{\r\n        this.hiddenCidades = true;\r\n      }\r\n    }catch{\r\n      val = \"a\";\r\n      this.hiddenCidades = true;\r\n    }\r\n     \r\n    // if the value is an empty string don't filter the items\r\n    if (val && val.trim() != '') {\r\n      this.vacinas = this.vacinas.filter((vacina) => {        \r\n        return (\r\n          vacina.nome_vacina.toLowerCase().indexOf(val.toLowerCase()) > -1 \r\n      );\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport interface VacinaUSer{\r\n  id_vacina?: string;\r\n  nome_vacina?: string;\r\n  data_vacina?: string;\r\n  ds_local_vacina?: string;\r\n}\r\n  \r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/vacina-modal/vacina-modal.ts","import { Injectable } from '@angular/core';\r\nimport { NavController, NavParams } from 'ionic-angular';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\n\r\n@Injectable()\r\nexport class VacinaService{\r\n    private API_URL = 'https://vacimaps-app.herokuapp.com'\r\n    token;\r\n\r\n    constructor(public navCtrl: NavController, public navParams: NavParams, private http: HttpClient){\r\n        this.token = JSON.parse(localStorage.getItem('token'));\r\n    }\r\n    \r\n      ionViewDidLoad() {\r\n        console.log('ionViewDidLoad VacinaService');\r\n      }\r\n    \r\n      getVacinas(){\r\n        return this.http.get(`${this.API_URL}/vacinas`, {headers: new HttpHeaders({\r\n            'token': this.token.token\r\n        })});\r\n    }\r\n    getVacinasUSer(){\r\n        return this.http.get(`${this.API_URL}/usuario/vacinas`, {headers: new HttpHeaders({\r\n            'token': this.token.token\r\n        })});\r\n    }\r\n    \r\n}\r\n\r\nexport interface Vacina{\r\n    id_vacina?: string;\r\n    nome_vacina?: string;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/vacina-modal/vacina.services.ts"],"sourceRoot":""}